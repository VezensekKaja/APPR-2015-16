---
title: "Poročilo pri predmetu Analiza podatkov s programom R"
author: "Kaja Vezenšek"
output:
  pdf_document:
    latex_engine: xelatex
    includes:
      in_header: lib/styles.sty
---

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
#source("fontconfig.r", encoding = "UTF-8")

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding = "UTF-8")
```

# Izbira teme

Izbrala sem si temo bruto in neto plač v Sloveniji v zadnjih letih. Za vzorec sem vzela plače na pol leta za vse občine.

***

# Obdelava, uvoz in čiščenje podatkov

```{r uvoz, echo=FALSE}
source("uvoz/uvoz.r", encoding = "UTF-8")
```

Uvozila sm podatke o plačah v obliki CSV s statističnega urada (http://pxweb.stat.si/pxweb/Dialog/varval.asp?ma=0701041S&ti=&path=../Database/Dem_soc/07_trg_dela/10_place/01_07010_place/&lang=2) ter v obliki HTML
s strani Soap (http://www.saop.si/poslovne-informacije/podatki-za-obracun-in-opomniki/povprecne-in-minimalne-place/).
Iz statističnega urada sem dobila podatke o vseh občinah, ki jih bom potem primerjala med seboj. Vzela sem le polletne podatke, da jih ne bi bilo preveč.
S strani Soap pa sem dobila HTML podatke o povprečnih bruto in neto plačah v Sloveniji. 


Slika \ref{fig:graf} prikazuje plače v večjih slovenskih mestih, občin je občutno preveč za prikaz na enem grafu.

```{r razpredelnice, echo=FALSE}
kable(head(place))
```

```{r graf, echo=FALSE, fig.align='center', fig.cap='Graf bruto plač v večjih mestih'}

ggplot(filter(place, kraj %in% c("Koper/Capodistria", "Ljubljana", "Maribor", 'Celje', 'Murska Sobota', 'Nova Gorica', 'Kranj', 'Novo Mesto')), aes(x=mesec, y=bruto, group = kraj, color = kraj)) + geom_line() + theme(axis.text.x = element_text(angle=60, hjust=1))

```

```{r grafic, echo=FALSE, fig.align='center', fig.cap='Graf neto plač v večjih mestih'}

ggplot(filter(place, kraj %in% c("Koper/Capodistria", "Ljubljana", "Maribor", 'Celje', 'Murska Sobota', 'Nova Gorica', 'Kranj', 'Novo Mesto')), aes(x=mesec, y=neto, group = kraj, color = kraj)) + geom_line() + theme(axis.text.x = element_text(angle=60, hjust=1))

```
***
